<!doctype html>
<html lang="en">	
<head>
	<meta charset="utf-8">
	<title>Présentation JavaScript</title>
	<link rel="stylesheet" href="bower_components/reveal-js/css/reveal.min.css">
	<link rel="stylesheet" href="bower_components/reveal-js/css/theme/moon.css" id="theme">	
	 <link rel="stylesheet" href="bower_components/reveal-js/lib/css/zenburn.css" >	
	<link rel="stylesheet" href="assets/css/index.css">	
</head>

<body>
	<!-- Wrap the entire slide show in a div using the "reveal" class. -->
	<div class="reveal">
		<!-- Wrap all slides in a single "slides" class -->
		<div class="slides">
                    <!-- ALL SLIDES GO HERE -->
                    <!-- Each section element contains an individual slide -->
                    <section>
                        <h1>JavaScript</h1>
                        <div>Programmation de base</div>		
                    </section>
                    <section>
                        <section>
                            <h2>Introduction</h2>
                            <ul>
                                <li>Langage qui est apparue dans les années 90</li>
                                <li>Langage "Client Side"</li>
                                <li>Evolue constamment depuis sa création avec les normes ECMAScript</li>
                            </ul><br><br>
                            <img src="assets/images/js.png"/>
                            <p>JavaScript est une implémentation d'ECMAScript et il y en a d'autres :</p>
                            <ul>
                                <li>JScript</li>
                                <li>ActionScript</li>
                            </ul>
                        </section>
                        <section>
                            <h2>Introduction</h2>
                            <p>Le JavaScript permet entre autre :</p><br>
                            <ul>
                                <li>La manipulation du DOM (contenu et aspect)</li>
                                <li>La réalisation de requête HTTP</li>
                                <li>La gestion d’un modèle de données coté client</li>
                            </ul><br><br>
                            <p>Depuis quelques années, ce langage se démocratise coté serveur <a href='/NodeJS.html' target="_blank">NodeJS</a></p><br>
                        </section>
                        <section>
                            <h2>Rappel sur HTML5</h2>
                            <p>HTML5 est la dernière version du standard HTML spécifié par la W3C.</p>
                            <img src="assets/images/html5.png"/>
                            <p>Il améliore la richesse et l’interactivité des applications web et permet l'utilisation de médias riches.</p>
                            <pre>
                                <code contenteditable data-trim  class="html">
    //Doctype html5
< !DOCTYPE html >
// Encodage de la page
<meta charset="utf-8">
                                </code>
                            </pre>
                        </section>
                        <section>
                            <h2>Rappel sur HTML5</h2>
                            <p>Cette évolution apporte une multitude de nouvelles fonctionnalités: </p><br>
                            <ul>
                                <li>Des balises sémantiques</li>
                                <li>Des balises multimédias</li>
                                <li>Des canvas</li>
                                <li>Des améliorations sur la gestion des formulaires</li>
                                <li>Du drag & drop</li>
                                <li>Des Web sockets</li>
                                <li>Des Web storages</li>
                                <li>La gestion de base de données (SQLite)</li>
                            </ul><br><br>
                            <p>Certains éléments obsolètes ont été supprimés</p>
                        </section>
                    </section>
                    <section>
                        <section>
                            <h2>POO en JavaScript</h2>
                            <p>Les objets sont indispensables dans tout langage de programmation, en JavaScript, on les utilise sous certaines contraintes : </p><br>
                             <ul>
                                 <li>Le langage n'est pas typé</li>
                                 <li>Il n'y a pas de notion de classe (ECMAScript 5)</li>
                                 <li>Toute entité ou structure peut être vue en tant qu'objet</li>
                                 <li>Le langage considère les objets en tant que tableau associatif</li>
                                 <li>Les fonctions JavaScript sont pris en compte par le langage en tant qu'objet</li>
                             </ul><br><br>
                            <p><b>Remarque: </b>La signature des méthodes n’est pas un moyen de différenciation, seul le nom de la fonction compte.</p>
                        </section>
                         <section>
                            <h3>Les objets - Notation littérale</h3>
                            <p>Un environnement JavaScript possède certains objets natifs prédéfinis. En plus de ces objets, il est possible de créer ses propres objets.</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
// Association variable <--> JSON                               
var obj = {
    a: 10,
    b: 2,

    sum : function() {
        return obj.a + obj.b;
    }
}

console.log("a:" + obj.a);
console.log("b:" + obj.b);
console.log("b:" + obj['b']);
console.log("sum:" + obj.sum());
                                </code>
                            </pre>
                        </section>
                        
                        <section>
                            <h3>Les objets - Fonction constructeur</h3>
                            <p>Exemple de syntaxe avec usage de function, this, new.</p>
                             <pre>
                                <code contenteditable data-trim class="javascript">
// Fonction constructeur                                
function Test(i, j) {
    this.a = i;
    this.b = j;

    this.sum = function() {
        return this.a + this.b;
    }
}

var obj = new Test(10, 2);
console.log("a:" + obj.a);
console.log("b:" + obj.b);
console.log("sum:" + obj.sum());
                                </code>
                             </pre>
                        <p>L'usage d'une notation ou d'une autre dépend de la réutilisabilité du code....</p>

                        </section>
                        <section>
                            <h3>Les objets - Contexte</h3>
                            <p>Chaque objet possède un contexte utilisable via le "this".</p>
                            <p>Les méthodes <b>apply</b> et <b>call</b> permettent l’appel d’une fonction pour un contexte passé en paramètre.</p>
                             <pre>
                                <code contenteditable data-trim class="javascript">
function Test(b) {
    console.log("sum: " + (this.a + b));
}

var obj = {a: 2};

//Apply (passage de paramètres sous forme de tableau)
Test.apply(obj, [10]);

//Call (passage de paramètres à l’appel de la fonction)
Test.call(obj, 10);
                                </code>
                             </pre>
                        </section>
                        <section>
                            <h3>Les objets - Contexte</h3>
                            <p>Une autre méthode permet la manipulation du contexte (this), il s'agit de la méthode <b>bind</b>.</p>
                            <p>Contrairement à call et apply, bind déclare une nouvelle fonction.</p>
                            <p>Cette méthode est fréquemment utilisée dans la gestion des évènements car elle n'appelle pas directement la fonction.</p>
                        </section>
                        <section>
                            <h3>Le prototypage</h3>
                            <p>Reprenons l'exemple de déclaration d'objet avec fonction constructeur :</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
// Fonction constructeur                                
function Test(i, j) {
    this.a = i;
    this.b = j;

    this.sum = function() {
        return this.a + this.b;
    }
}
                                </code>
                            </pre>
                            <p>A chaque fois que la méthode de construction de l'objet est appelée, une nouvelle méthode « sum »  est créée pour l'objet.
</p>
                        </section>
                        <section>
                            <h3>Le prototypage</h3>
                            <p>Cet aspect a des impacts sur les performances et la consommation mémoire surtout dans des applications JavaScript utilisant beaucoup d'objets.</p>
                            <p>Le comportement souhaité serait que tous les objets pointent vers la méthode « sum ».</p><br><br>
                            <div><b>Le prototypage est fait pour palier à ce problème.</b></div>
                        </section>
                        <section>
                            <h3>Le prototypage</h3>
                            <p>Le prototypage permet de définir une sorte de « modèle » pour les objets.</p>
                            <p>Il est toujours important de définir une fonction constructeur pour déclarer la classe.</p>
                            <p>Exemple :</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
// Fonction constructeur                                
function Test(i, j) {
    this.a = i;
    this.b = j;
}

Test.prototype.sum = function() {
    return this.a + this.b;
}
                                </code>
                            </pre>
                        </section>
                        <section>
                            <h3>L'héritage</h3>
                            <p>L'héritage le plus basique consiste à hériter de la fonstion constructeur avec la méthode call (ou apply).</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
// Fonction constructeur                                
function Test(i, j) {
    this.a = i;
    this.b = j;

    this.sum = function() {
        return this.a + this.b;
    }
}

// Héritage avec call
function Test2(i, j, k) {
    Test.call(this, i, j);
}


                                </code>
                            </pre>
                            <p>Si les méthodes de la classe mère sont définies en dehors du constructeur via l'attribut prototype, l'héritage ne peut alors se faire.</p>
                        </section>
                        <section>
                            <h3>L'héritage</h3>
                            <p>L'héritage par prototype consiste simplement à remplacer la valeur du prototype de la classe fille par celui de la classe mère.</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
// Héritage avec prototype
Test2.prototype = new Test();

                                </code>
                            </pre>
                        </section>
                        <section>
                            <h3>L'héritage</h3>
                            <p>Certains frameworks JavaScript facilitent l'usage de l'héritage. (ex: Prototypejs)</p>
                            <p>ECMAScript 6 a introduit un nouvel ensemble de mots-clés pour implémenter des classes. Cela ne transforme pas le modèle de JavaScript qui reste basé sur les prototypes. </p>
                            <br>
                            <p>Les nouveaux mots-clé incluent :</p>
                            <ul>
                                <li>class</li>
                                <li>constructor</li>
                                <li>static</li>
                                <li>extend</li>
                                <li>super</li>
                            </ul>
                        </section>
                        <section>
                            <h3>Contrôle de type</h3>
                            <p>L'opérateur <b>typeof</b> renvoie une chaîne qui indique le type de son opérande.</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
typeof 'test' === 'string';
typeof 1234 === 'number';
                                </code>
                            </pre>
                            <p>L'opérateur <b>instanceof</b> permet de vérifier si notre référence est d’un type.</p>
                            <p>Tous les objets héritent de Object (Origine JAVA).</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
function Test(i, j) {
    this.a = i;
    this.b = j;
}

Test.prototype.sum = function() {
    return this.a + this.b;
}

var obj = new Test(2, 10);
console.log(obj instanceof Test);
                                </code>
                            </pre>
                        </section>
                    </section>
                    <section>
                        <section>
                            <h2>Manipulation du DOM</h2>
                            <p>La variante HTML du DOM se décompose en éléments organisés d'une manière hiérarchique.</p>
                            <p>Tout élément du DOM est un objet qui possède :</p>
                            <ul>
                                <li>Des propriétés</li>
                                <li>Des méthodes</li>
                                <li>Des évènements</li>
                            </ul>
                        </section>
                        <section>
                            <h3>Accéder à un élément du DOM</h3>
                            <p>De nombreuses fonctions existent pour accéder à un élément du DOM :</p>
                            <ul>
                                <li>Par ID</li>
                                <li>Par Class</li>
                                <li>Par Tag</li>
                                <li><b>Par sélecteur CSS</b></li>
                            </ul>
                            <pre>
                                <code contenteditable data-trim class="javascript">
// Via l'attribut id
document.getElementById('test');
// Via l'attribut class (retourne un tableau)
document.getElementsByClassName('input');
// Via l'attribut name (retourne un tableau)
document.getElementsByName('nom');
// Via le nom de tag (retourne un tableau)
document.getElementsByTagName('input');

// Via un sélecteur CSS
document.querySelector('input[type="text"]');
document.querySelectorAll('input[type="text"]');
                                </code>
                            </pre>
                        </section>
                        <section>
                            <h3>Accéder à un élément du DOM</h3>
                            <p>Il existe déjà des tableaux prédéfinis afin de faciliter l'accès à certains types d'objets. </p>
                            <ul>
                                <li>document.images</li>
                                <li>document.anchors</li>
                                <li>document.forms</li>
                                <li>document.links</li>
                                <li>document.scripts</li>
                                <li>...</li>
                            </ul>
                        </section>
                        <section>
                            <h3>Intéragir avec un élément du DOM</h3>
                            <p>Via ses propriétés, méthodes et évènements.</p>
                            <p>Par exemple :</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
// Propriétés                            
document.getElementById('test').style
document.getElementsByTagName('a')[0].href

// Méthodes
document.getElementById('test').hasAttribute(‘href’)

// Evènements
document.getElementById('test').onclick = function(){...};
document.getElementById('test').addEventListener("click", function(){
    ...
});
                                </code>
                            </pre>
                        </section>
                        <section>
                            <h3>Gérer dynamiquement les éléments du DOM</h3>
                            <ul>
                                <li>Création</li>
                                <li>Suppression</li>
                                <li>Edition</li>
                            </ul><br><br>
                            <p>Exemple ajout d’un élément dans un liste :</p>
                            <pre>
                                <code contenteditable data-trim class="javascript">
var node= document.createElement(‘li’);
node.text(‘test’);
document.getElementById('myList').appendChild(node);
                                </code>
                            </pre>
                            <a href="http://www.w3schools.com/jsref/dom_obj_all.asp" target="_blank">Pour plus d'informations, cliquez ici</a><br><br>
                            <p>La manipulation du DOM se fait rarement en natif, les Frameworks JavaScript facilitent grandement cet usage. (jQuery, Angular)</p>
                        </section>
                    </section>
                    <section>
                        <section>
                            <h2>Bonnes pratiques</h2>
                            <p>Afin d'optimiser les performances du DOM, il est important de : </p>
                            <ul>
                                <li>Limiter les changements de DOM au maximum</li>
                                <li>Construire le nouveau rendu à intégrer au DOM dans sa globalité avant de l’insérer au document</li>
                                <li>Limiter les évènements déclenchés de manière récurrente (Ex : resize et le scroll)</li>
                                <li>Privilégier le Lazy loading des ressources non nécessaires (defer & Async)</li>
                                <li>Mettre la déclaration des imports JS en bas du body</li>
                            </ul>
                        </section>
                        <section>
                            <h2>Bonnes pratiques</h2>
                            <p>Afin d'optimiser le code JavaScript :</p>
                            <ul>
                                <li>Eviter de déclarer des variables sans « var ». La variable se retrouvera globale</li>
                                <li>Privilégier les prototypes pour les déclarations de structures</li>
                                <li>Remplacer la concaténation par une insertion dans un tableau avant de lier les différents éléments du tableau</li>
                            </ul>
                            <pre>
                                <code  contenteditable data-trim class="javascript">
var string = '123' + '456';
var string =['123', '456'].join();

                                </code>
                            </pre>
                        </section>
                         <section>
                            <h2>Bonnes pratiques</h2>
                            <ul>
                                <li>Privilégier l'usage des fonctions de bases de JS au maximum et éviter les surcouches des différents Framework du marché</li>
                                <li>Ecriture du code JS en module qu’on concatène et minifie</li>
                                <li>Déclarer JavaScript en mode strict
                                    <pre>
                                        <code contenteditable data-trim class="javascript">
"use strict";
var x = 123;
                                        </code>
                                    </pre>
                                </li>
                            </ul>
                        </section>
                         <section>
                            <h2>Bonnes pratiques</h2>
                            <ul>
                                <li>Utiliser les namespaces JavaScript pour un code réutilisable
                                    <pre>
                                        <code  contenteditable data-trim class="javascript">
// Namespace
var Namespace = Namespace || {};
Namespace.test = function() {
    ...
}
                                        </code>
                                    </pre>
                                </li>
                                <li>Utiliser les fonctions pour le code non réutilisable et fermé
                                    <pre>
                                        <code  contenteditable data-trim class="javascript">
// Fonction de fermeture
(function(){
    var x = 123;
    console.log(x);
})();
                                        </code>
                                    </pre>
                                </li>
                            </ul>
                           
                        </section>
                    </section>
                    <section>
                        <section>
                            <h2>Les promises</h2>

                        </section>
                    </section>
                    <section>
                        <section>
                            <h2>Stockage de données locales</h2>
                            <p>Une page Web est dites « state less », cependant la plupart des sites ont besoin de stocker des données (authentification, préférences utilisateur...)</p>
                            <p>Les <b>cookies</b> sont les premiers outils pour remédier à ce problème.</p><br>
                            <p>D’autres outils plus puissants sont apparus par la suite :</p>
                            <ul>
                                <li>Local Storage / session storage</li>
                                <li>Base de données Web SQL</li>
                            </ul><br><br>
                            <p>La manipulation de ces objets est inclue en native dans JavaScript.</p>
                        </section>
                        <section>
                            <h3>Les cookies</h3>
                            <p>Un cookie est un moyen de persistence simple qui a les caractéristiques suivantes :</p>
                             <ul>
                                <li>Système clé/valeur</li>
                                <li>Date d'expiration</li>
                                <li>Domaines associés (Peut être partagé entre plusieurs domaines)</li>
                                <li>Taille limitée à 4Ko</li>
                            </ul>
                            <pre>
                                <code  contenteditable data-trim class="javascript">
// Ecriture
document.cookie = "username=David Talabard; expires=Thu, 08 Sep 2016 12:00:00 UTC";
// Lecture
var cookie = document.cookie;
// Suppression
document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC";

                                </code>
                            </pre>
                        </section>
                        <section>
                            <h3>Les Web storages</h3>
                             <ul>
                                <li>Stockage de données plus variées</li>
                                <li>Associé à un unique domaine</li>
                                <li>Taille limitée à environ 10Mo (en fonction des navigateurs)</li>
                             </ul><br><br>
                            <p>Deux objets sont mis à disposition : <b>Session storage</b> et <b>Local storage</b></p>
                        </section>
                        <section>
                            <h3>Session storage</h3>
                             <ul>
                                 <li><b>Objet sessionStorage</b></li>
                                <li>Stockage de données  sur la durée d'une session de navigation</li>
                                <li>Portée limitée à la fenêtre ou l'onglet actif</li>
                                <li>La perte de session ou fermeture de la fenêtre entraine une perte de données</li>
                             </ul>
                        </section>
                        <section>
                            <h3>Local storage</h3>
                             <ul>
                                 <li><b>Objet localStorage</b></li>
                                <li>Stockage de données  sans durée de vie</li>
                                <li>Pour un même domaine, les données du local storage peuvent être exploitées dans différents onglets (fenêtres)</li>
                             </ul>
                        </section>
                        <section>
                            <h3>Exemple d'utilisation des Web Storages</h3>
                            <pre>
                                <code  contenteditable data-trim class="javascript">
localStorage.setItem('Test', '123456');
localStorage.setItem('Test2', JSON.stringify({a: 2, b: 10}));
                                </code>
                            </pre>
                            <img src="assets/images/localStorage.png"/>
                        </section>
                    </section>
                    <section>
                        <section>
                            <h2>ECMAScript 2015 (ES6)</h2>
                        </section>
                    </section>
                    <section>
                        <section>
                            <h2>TypeScript</h2>
                        </section>
                    </section>
		</div>
                <footer>
                    <img src="assets/images/modis.png"/><br> Présentation JavaScript - David Talabard - Septembre 2016.
                </footer>
	</div>

	<script src="bower_components/reveal-js/lib/js/classList.js"></script>
	<script src="bower_components/reveal-js/lib/js/head.min.js"></script>
	<script src="bower_components/reveal-js/js/reveal.min.js"></script>

	<script>
		// Required, even if empty.
		Reveal.initialize({
                    history: true,
                    width: 1100,
                    transition: 'fade', // none/fade/slide/convex/concave/zoom
		    dependencies: [

		        // Syntax highlight for <code> elements
		        { src: 'bower_components/reveal-js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }

		    ]
		});
		// Shows the slide number using default formatting
		Reveal.configure({ slideNumber: true });

	</script>
</body>
</html>